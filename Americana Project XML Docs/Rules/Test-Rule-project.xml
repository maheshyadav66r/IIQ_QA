<?xml version='1.0' encoding='UTF-8'?>
<!DOCTYPE sailpoint PUBLIC "sailpoint.dtd" "sailpoint.dtd">
<sailpoint>
<Rule language="beanshell" name="Test-Rule-project">
  <Source>
  import sailpoint.api.SailPointContext;
  import sailpoint.api.IdentityService;
  import sailpoint.api.Provisioner;

  import sailpoint.object.Application;
  import sailpoint.object.Identity;
  import sailpoint.object.Link;
  import sailpoint.object.Custom;
  import sailpoint.object.Rule;
  import sailpoint.object.ProvisioningPlan;
  import sailpoint.object.ProvisioningPlan.AccountRequest;
  import sailpoint.object.ProvisioningPlan.AttributeRequest;
  import sailpoint.object.Workflow;

  import java.io.IOException;
  import java.io.InputStream;
  import java.net.HttpURLConnection;
  import java.net.URL;
  import java.util.Scanner;

  import sailpoint.object.ResourceObject;
  import java.text.SimpleDateFormat;
  import java.text.DateFormat;
  import sailpoint.tools.CloseableIterator;
  import sailpoint.tools.GeneralException;
  import sailpoint.tools.Util;
  import java.text.Normalizer;
  import java.text.Normalizer.Form;
  import sailpoint.object.EmailOptions;
  import sailpoint.object.EmailTemplate;
  import sailpoint.object.EmailFileAttachment;
  import java.io.File;
  import java.nio.file.Files;

  import sailpoint.connector.ADLDAPConnector;
  import sailpoint.connector.Connector;
  import sailpoint.connector.ConnectorException;
  import org.apache.commons.lang3.StringUtils;
  import org.apache.commons.logging.LogFactory;
  import org.apache.commons.logging.Log;

  Log log = LogFactory.getLog("americana.ruleLibrary.Attribute");
  log.trace("***RUNNING Americana-RuleLibrary-Attribute***");

  Identity ide = context.getObjectByName(Identity.class,"41872");


  log.trace("********Entered Test Provision Rule : "+identityName);
  ProvisioningPlan plan = null;
    plan = new ProvisioningPlan();
    plan.setIdentity(ide);
    AccountRequest acctReq = new AccountRequest();
    acctReq.setOperation(AccountRequest.Operation.Modify);
    acctReq.setApplication("Azure AD");
    acctReq.setNativeIdentity("025d9547-62df-4e2d-a932-aafe907ebe03");
    acctReq.add(new AttributeRequest("assignedPlans",ProvisioningPlan.Operation.Set,"efccb6f7-5641-4e0e-bd10-b4976e1bf68e : 41781fb2-bc02-4b7c-bd55-b576c07bb09d"));
  acctReq.add(new AttributeRequest("assignedPlans",ProvisioningPlan.Operation.Set,"efccb6f7-5641-4e0e-bd10-b4976e1bf68e : 8a256a2b-b617-496d-b51b-e76466e88db0"));
  acctReq.add(new AttributeRequest("assignedPlans",ProvisioningPlan.Operation.Set,"efccb6f7-5641-4e0e-bd10-b4976e1bf68e : c1ec4a95-1f05-45b3-a911-aa3fa01094f5"));
    plan.add(acctReq);

    
    Provisioner pro = new Provisioner(context);
    pro.setNoCreateTemplates(true);
    return pro.compile(plan);
    //return pro.execute(plan);
  
  </Source>
</Rule>

</sailpoint>
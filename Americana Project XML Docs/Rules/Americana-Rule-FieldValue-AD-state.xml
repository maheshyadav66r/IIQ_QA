<?xml version='1.0' encoding='UTF-8'?>
<!DOCTYPE sailpoint PUBLIC "sailpoint.dtd" "sailpoint.dtd">
<sailpoint>
<Rule language="beanshell" name="Americana-Rule-FieldValue-AD-state" type="FieldValue">
  <Description>This rule can be used to generate a field value (eg - an account name) using data from the given Identity. If this rule is run in the context of a workflow step then the arguments passed into the step will also be available. Also, any field values that have been processed so far from the policy related to the Application/Role will be available.</Description>
  <Signature returnType="String" />
  <Source>String country = identity.getAttribute("country");
if(country!=null &amp;&amp; country.equalsIgnoreCase("AE")){
	return "Sharjah";
}
else if(country!=null &amp;&amp; country.equalsIgnoreCase("QA")){
		return "Doha";		
		}
else if(country!=null &amp;&amp; country.equalsIgnoreCase("KW")){
		return "Safat";		
		}
else if(country!=null &amp;&amp; country.equalsIgnoreCase("IN")){
		return "Haryana";		
		}
else if(country!=null &amp;&amp; country.equalsIgnoreCase("LB")){
		return "Beirut";		
		}
else if(country!=null &amp;&amp; country.equalsIgnoreCase("MA")){
		return "Casablanca";		
		}
else if(country!=null &amp;&amp; country.equalsIgnoreCase("OM")){
		return "Muscat";		
		}
else if(country!=null &amp;&amp; country.equalsIgnoreCase("BH")){
		return "Manama";		
		}
else if(country!=null &amp;&amp; country.equalsIgnoreCase("SA")){
		return "Riyadh";		
		}
else if(country!=null &amp;&amp; country.equalsIgnoreCase("KZ")){
		return "Almaty";		
		}
else if(country!=null &amp;&amp; country.equalsIgnoreCase("JO")){
		return "Amman";		
		}
else if(country!=null &amp;&amp; country.equalsIgnoreCase("IQ")){
  
  if (identity.getAttribute("location") != null){
    
  String loc = (identity.getAttribute("location")).substring(0,3);
  
  if (loc.equalsIgnoreCase("026")) {
  return "Iraq - Baghdad";
  }
  else if (loc.equalsIgnoreCase("027")) {
    return "Kurdistan - Erbil";
  }
  }
  return null;
}

else if(country!=null &amp;&amp; country.equalsIgnoreCase("EG")){
  
  if (identity.getAttribute("location") != null){
    
  String loc = (identity.getAttribute("location")).substring(0,3);
  
  if (loc.equalsIgnoreCase("037")) {
  return "Giza";
  }
  else if (loc.equalsIgnoreCase("045")) {
    return "Giza";
  }
  }
  return null;
}
  </Source>
</Rule>

</sailpoint>